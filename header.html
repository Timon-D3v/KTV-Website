<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Header</title>
    <link rel="stylesheet" href="./css/hamburger.css">
    <link rel="stylesheet" href="./css/global.css">
    <link rel="stylesheet" href="" id="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <script type="text/javascript" src="https://unpkg.com/typed.js@2.0.16/dist/typed.umd.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.3/gsap.min.js"></script>
    <script src="./js/nav.js" defer></script>
    <script src="./js/global.js" defer></script>
    <script src="./js/header.js" defer></script>
    <script src="./js/preload_and_typed.js" defer></script>
    <style>
        .contact {
            display: flex;
            justify-content: center;
        }

        .eUDiv {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 70vw;
            height: 70vh;
            border-radius: 2.5vh;
            background: linear-gradient(to right, var(--c7), var(--c2));
            box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
        }

        .eUFormDescription h1 {
            margin: 3vh 0;
            color: var(--w1);
            font-size: 5vh;
            font-weight: bold;
            text-align: center;
            letter-spacing: 0.1em;
        }
        
        .eUForm {
            display: flex;
            flex-direction: column;
            transition: all 0.3s ease-in-out;
        }
        
        .eUInputDiv {
            position: relative;
            width: 100%;
            margin: 1vh 0;
        }
        
        .eUNameInput,
        .eUEmailInput,
        .eUMessageInput {
            font-size: 3vh;
            box-sizing: border-box;
            padding: 1vh;
            outline: none;
            color: var(--w1);
            border: none;
            border-bottom: 2px solid var(--w1);
            background: transparent;
            border-radius: 0;
            width: 100%;
            resize: none;
            transition: all 0.3s ease-in-out;
        }
        
        .eUNameLabel,
        .eUEmailLabel,
        .eUMessageLabel {
            font-size: 3vh;
            position: absolute;
            left: 0;
            top: 0;
            color: var(--w1);
            padding: 1vh;
            margin-left: 0.5em;
            pointer-events: none;
            transition: all 0.5s ease-in-out;
            text-transform: uppercase;
        }
        
        .eUNameInput:focus ~ .eUNameLabel,
        .eUNameInput:valid ~ .eUNameLabel,
        .eUEmailInput:focus ~ .eUEmailLabel,
        .eUEmailInput:valid ~ .eUEmailLabel,
        .eUMessageInput:focus ~ .eUMessageLabel,
        .eUMessageInput:valid ~ .eUMessageLabel {
            transform: translateY(-50%) scale(0.9);
            margin: 0;
            padding: 0.4em;
            background: transparent;
        }
        
        .eUSubmit {
            color: #e8e8e8;
            font-size: 15px;
            align-self: flex-start;
            padding: 0.6em;
            border: none;
            cursor: pointer;
            margin-bottom: 10px;
            background: transparent;
            transition: all 0.3s ease-in-out;
            position: relative;
            overflow: hidden;
            border-radius: 5px;
        }
        
        .eUSubmit:before {
            content: "";
            position: absolute;
            bottom: 100%;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #e8e8e8;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        
        .eUSubmit:hover:before {
            opacity: 0.2;
        }
        
        .eUSubmit:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .eUMessageInput:focus {
            font-size: 15px;
            height: 50px;
        }

        .eUCheckLabel {
            cursor: pointer;
            margin-right: 10%;
        }
        
        .eUCheckInput {
            display: none;
        }
        
        .eUCheckSVG {
            overflow: visible;
        }
        
        .eUCheckSVGPath {
            fill: none;
            stroke: white;
            stroke-width: 6;
            stroke-linecap: round;
            stroke-linejoin: round;
            transition: stroke-dasharray 0.5s ease, stroke-dashoffset 0.5s ease;
            stroke-dasharray: 241 9999999;
            stroke-dashoffset: 0;
        }
        
        .eUCheckInput:checked ~ .eUCheckSVG .eUCheckSVGPath {
            stroke-dasharray: 70.5096664428711 9999999;
            stroke-dashoffset: -262.2723388671875;
        }

        .eUCheckbox {
            display: flex;
            flex-direction: row;
            align-items: center;
            width: 100%;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        .eUAgreement {
            margin: 0;
            font-size: 12px;
            color: white;
        }

        .emailUsStatusDiv {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 40px;
            width: 100%;
        }

        .emailUsStatusE {
            color: red;
            max-width: 90%;
            margin: 0;
        }

        .emailUsStatus {
            color: white;
            max-width: 90%;
            margin: 0;
        }

        .eUAgreementDetails {
            color: white;
        }

        .eUAgreementDetails:hover {
            color: aquamarine;
            cursor: pointer;
        }

        .eUFullAgreement {
            position: absolute;
            left: 150px;
            top: 390px;
            background: linear-gradient(var(--c7) 0%, var(--c2) 100%);
            border: solid;
            border-color: white;
            border-width: 1px;
            border-radius: 5px;
            padding: 10px;
            z-index: 2;
        }

        .eUFullAgreementP {
            font-size: 12px;
            color: white;
            margin: 0;
        }
    </style>
</head>
<body>
    <header>
        <img alt="Logo" src="./img/logo.png" class="logo">
        <h1>Title</h1>
        <button class="hamburger hamburger--spin" type="button">
            <span class="hamburger-box">
                <span class="hamburger-inner"></span>
            </span>
        </button>
    </header>
    <nav>
        <div class="nav">
            <ul>
                <li><a href="./index.html">
                    <img alt="Home" class="navpic" src="./img/svg/home.svg" loading="lazy"
                    >Home
                </a></li>
                <li><a href="./contact.html">
                    <img alt="Kontakt" class="navpic" src="./img/svg/contact.svg" loading="lazy"
                    >Vorstand | Kontakt
                </a></li>
                <li><a href="./teamVolley.html">
                    <img alt="Volleyball" class="navpic" src="./img/svg/volleyball.svg" loading="lazy"
                    >Mannschaften Volleyball
                    </a>
                    <ul>
                        <li><a href="./teamVolleyAmigos.html">Amigos</a></li>
                        <li><a href="./teamVolleyJunior.html">Junior*innen</a></li>
                        <li><a href="./teamVolleyPallavolo.html">Pallavolo Capelli due</a></li>
                        <li><a href="./teamVolleyVollgas.html">Vollgas</a></li>
                    </ul>
                </li>
                <li><a href="./riege.html">
                    <img alt="Faustball" class="navpic" src="./img/svg/fistball.svg" loading="lazy"
                    >Männerriege
                    </a>
                    <ul>
                        <li><a href="./riegeFaustball.html">Faustball</a></li>
                    </ul>
                </li>
                <li><a href="./documents.html">
                    <img alt="Dokuemnt" class="navpic" src="./img/svg/document.svg" loading="lazy"
                    >Programm | Dokumente
                </a></li>
                <li><a  href="./photos.html">
                    <img alt="Bild Icon" class="navpic" src="./img/svg/image.svg" loading="lazy"
                    >Fotogalerie
                    </a>
                    <ul>
                        <li><a href="./photosAktive.html">Aktive</a></li>
                        <li><a href="./photosJunior.html">Junioren</a></li>
                        <li><a href="./photosRiege.html">Männerriege</a></li>
                    </ul>
                </li>
                <li><a  href="./imprint.html">
                    <img alt="Impressum" class="navpic" src="./img/svg/imprint.svg" loading="lazy"
                    >Impressum
                </a></li>
            </ul>
        </div>
    </nav>
    <main>
        <div class="hero">
            <h1 class="hero_title">Wir sind<br>
                <span id="hero_title"></span>
            </h1>
            <div id="hero_text">
                <p>KTV Altstetten</p>
                <p>Amigos</p>
                <p>Junior*innen</p>
                <p>Pallavolo Capelli due</p>
                <p>Vollgas</p>
                <p>eine Männerriege</p>
            </div>
            <a class="call_to_action" href="./contact.html">Kontaktiere uns!</a>
        </div>
        <div class="vorstand">
            <h1 class="title">Vorstand</h1>
            <div class="vorstand_slider_container">
                <div class="vorstand_slider">
                    <div class="slide_element">
                        <img alt="Präsident Renato Fagetti" src="./img/common/president.jpg">
                        <h4>Präsident</h4>
                        <p>Renato Fagetti</p>
                        <p>E-Mail: renato.fagetti@vtxmail.ch</p>
                    </div>
                    <div class="slide_element">
                        <img alt="Techn. Leiterin_Sabine Schuhmacher" src="./img/common/tech.jpg">
                        <h4>Technische Leiterin</h4>
                        <p>Sabine Schuhmacher</p>
                        <p>E-Mail: sabine.schuhmacher@gmx.ch</p>
                    </div>
                    <div class="slide_element">
                        <img alt="Kassier Jacqueline Fisch" src="./img/common/cashier.JPG">
                        <h4>Kassier</h4>
                        <p>Jacqueline Fisch</p>
                        <p>E-Mail: jackie.fisch@gmx.ch</p>
                    </div>
                    <div class="slide_element">
                        <img alt="Obmann Gery Flatt" src="./img/common/obmann.JPG">
                        <h4>Obmann</h4>
                        <p>Gery Flatt</p>
                        <p>E-Mail: gerhard.flatt@bluewin.ch</p>
                    </div>
                    <div class="slide_element">
                        <img alt="Aktuar Adrian Stutz" src="./img/common/aktuar.jpg">
                        <h4>Aktuar</h4>
                        <p>Adrian Stutz</p>
                        <p>E-Mail: a-d-stutz@mail.ch</p>
                    </div>
                </div>
                <div class="vorstand_slider">
                    <div class="slide_element">
                        <img alt="Präsident Renato Fagetti" src="./img/common/president.jpg">
                        <h4>Präsident</h4>
                        <p>Renato Fagetti</p>
                        <p>E-Mail: renato.fagetti@vtxmail.ch</p>
                    </div>
                    <div class="slide_element">
                        <img alt="Techn. Leiterin_Sabine Schuhmacher" src="./img/common/tech.jpg">
                        <h4>Technische Leiterin</h4>
                        <p>Sabine Schuhmacher</p>
                        <p>E-Mail: sabine.schuhmacher@gmx.ch</p>
                    </div>
                    <div class="slide_element">
                        <img alt="Kassier Jacqueline Fisch" src="./img/common/cashier.JPG">
                        <h4>Kassier</h4>
                        <p>Jacqueline Fisch</p>
                        <p>E-Mail: jackie.fisch@gmx.ch</p>
                    </div>
                    <div class="slide_element">
                        <img alt="Obmann Gery Flatt" src="./img/common/obmann.JPG">
                        <h4>Obmann</h4>
                        <p>Gery Flatt</p>
                        <p>E-Mail: gerhard.flatt@bluewin.ch</p>
                    </div>
                    <div class="slide_element">
                        <img alt="Aktuar Adrian Stutz" src="./img/common/aktuar.jpg">
                        <h4>Aktuar</h4>
                        <p>Adrian Stutz</p>
                        <p>E-Mail: a-d-stutz@mail.ch</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="contact">
            <div class="eUDiv">
                <form id="emailUs" class="eUForm">
                    <div class="eUFormDescription">
                        <h1>Kontaktiere Uns!</h1>
                    </div>
                    <div class="eUInputDiv">
                        <input type="text" required id="autorName" class="eUNameInput">
                        <label for="autorName" class="eUNameLabel">Name</label>
                    </div>
                    <div class="eUInputDiv">
                        <input type="email" required id="autorEmail" class="eUEmailInput">
                        <label for="autorEmail" class="eUEmailLabel">E-Mail</label>
                    </div>
                    <div class="eUInputDiv">
                        <textarea name="emailText" form="emailUs" required id="emailText" class="eUMessageInput"></textarea>
                        <label for="emailText" class="eUMessageLabel">Nachricht</label>
                    </div>
                    <div class="eUCheckbox">
                        <label for="emailUsFormCheckbox" class="eUCheckLabel">
                            <input type="checkbox" name="emailUsFormCheckbox" id="emailUsFormCheckbox" class="eUCheckInput" required>
                            <svg class="eUCheckSVG" viewBox="0 0 64 64" height="1em" width="1em">
                                <path class="eUCheckSVGPath" d="M 0 16 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 16 L 32 48 L 64 16 V 8 A 8 8 90 0 0 56 0 H 8 A 8 8 90 0 0 0 8 V 56 A 8 8 90 0 0 8 64 H 56 A 8 8 90 0 0 64 56 V 16" pathLength="575.0541381835938"></path>
                            </svg><span class="invisible">Check</span>
                        </label>
                        <p class="eUAgreement">Ich bin einverstanden, dass meine Daten verschickt werden. 
                            <span class="eUAgreementDetails" onclick="showAgreement()">Mehr Informationen</span>
                        </p>
                        <script>
                            let a = false;

                            function showAgreement () {
                                if (a) {
                                    a = false;
                                    $("#eUFullAgreement").css("display", "none");
                                } else {
                                    a = true;
                                    $("#eUFullAgreement").css("display", "block");
                                };
                            };
                        </script>
                        <div class="eUFullAgreement" id="eUFullAgreement" style="display: none;">
                            <p class="eUFullAgreementP">Das versenden dieser Mail verschickt deine Angaben über das Internet an eine dritte Seite weiter, deren Sicherheit der KTV Altstetten nicht gewährleisten kann.</p>
                        </div>
                    </div>
                    <input type="submit" id="sendEmail" onclick="checkForRequired()" value="Nachricht Senden →" class="eUSubmit">
                    <div id="emailUsStatus"></div>
                </form>
            </div>
        </div>
    </main>
    <script>
        //---- Change these Variables for reuse ----//
let mailFormId = "#emailUs";
let sumbitId = "#sendEmail";
let autorNameId = "#autorName";
let autorEmailId = "#autorEmail";
let emailTextId = "#emailText";
let checkboxId = "#emailUsFormCheckbox";
let statusReport = "#emailUsStatus";
//------------------------------------------//

// Powered by: https://postmail.invotes.com //

//------------------------------------------//

let postmailData = {
    "access_token": "72q03rx7katuj10jvr81adch"
};

function checkForRequired (form) {
    let checker = true;
    let errorMSG = "No Error";

    if ($(autorNameId).val() == "" || $(autorEmailId).val() == "" || $(emailTextId).val() == "") {
        checker = false;
        errorMSG = "Du hast noch nicht alle Felder ausgefüllt...";
    };

    if (!$(checkboxId).is(":checked")) {
        checker = false;
        if (errorMSG == "No Error") {
            errorMSG = "Du musst den Bedingungen zustimmen um fortzufahren.";
        } else {
            errorMSG = "Du musst alle Felder ausfüllen und den Bedingungen zustimmen um fortzufahren.";
        };
    };

    if (checker) {
        postmailSend();
    } else {
        formError(errorMSG);
    };
};
                   
function postmailSend () {
    $(sumbitId).val("Senden...");
    $(sumbitId).attr("disabled", true);

    let request = new XMLHttpRequest();

    let requestDate = Date();
    requestDate = requestDate.slice(0, 4) + requestDate.slice(8, 10) + ". " + requestDate.slice(4, 7) + " " + requestDate.slice(11, 15) + " - " + requestDate.slice(16, 24); 

    request.onreadystatechange = () => {
        if (request.readyState == 4 && request.status == 200) {
            mailSentSuccessfully();
        } else if (request.readyState == 4) {
            mailSentError(request.response);
        };
    };

    let autorEmail = $(autorEmailId).val();
    let autorName = $(autorNameId).val();
    let emailMessage = $(emailTextId).val();

    let subject = autorName + " über KTV Website Formular";
    let message = autorName + " schreibt am " + requestDate + ":\n===================================\n\n" +
    emailMessage +"\n===================================\n\n" + autorName + " hat diese E-Mail hinterlegt: " +
    autorEmail + "\n\n===================================\n\nDies ist eine automatisch verschickte E-Mail über eine API von postmail.invotes.com\nProgrammiert und aufesetzt von Timon Fiedler für den KTV Altstetten.\nTimon Fiedler ist nicht verantwortlich für eventuellen Spam oder andere Fehler, die durch den Endnutzer entstehen."

    postmailData['subject'] = subject;
    postmailData['text'] = message;

    let paramameters = toParams(postmailData);
                    
    request.open("POST", "https://postmail.invotes.com/send", true);
    request.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                    
    request.send(paramameters);
                    
    return false;
};
                    
function toParams (postmailData) {
    let form_data = [];
    for (let key in postmailData) {
        form_data.push(encodeURIComponent(key) + "=" + encodeURIComponent(postmailData[key]));
    };
                    
    return form_data.join("&");
}
                    
$(mailFormId).on("submit", (e) => {
    e.preventDefault();
});

function mailSentSuccessfully () {
    console.log("Email sent successfully.");
    $(sumbitId).val("Gesendet!");
    $(statusReport).html("<p class='emailUsStatus'>Deine Email wurde erfolgreich gesendet.</p>");
};

function mailSentError (error) {
    console.error("Something went wrong while sending your E-Mail...\nFurther information: ", error);
    $(sumbitId).val("Fehler!");
    $(statusReport).html('<p class="emailUsStatusE">Beim Senden der E-Mail ist ein Fehler aufgetreten...</p>');
};

function formError(errorMSG) {
    console.error("Something went wrong while sending your E-Mail...\nFurther information: ", errorMSG);
    $(statusReport).html('<p class="emailUsStatusE">' + errorMSG + '</p>');
};
    </script>
    <footer>
        <div class="upper_footer">
            <a href="./imprint.html">Impressum</a>
            <p>|</p>
            <a href="http://lippuner.internet-box.ch:8080">Developper</a>
        </div>
        <p class="lower_footer">Copyright © 2024 Volleyball KTV Altstetten | Alle Rechte vorbehalten</p>
    </footer>
    <style>
        footer {
            height: 20vh;
            background-color: var(--w1);
            box-shadow: 0px -4px 2px -2px gray;
        }

        .upper_footer {
            height: 10vh;
            display: flex;
            justify-content: space-evenly;
            align-items: center;
            font-size: 3vh;
            & p {
                font-weight: 600;
            }
            & a {
                text-decoration: none;
                &:hover {
                    color: var(--c3);
                }
            }
        }

        .lower_footer {
            box-sizing: border-box;
            height: 10vh;
            margin: 0;
            font-size: 2vh;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</body>
</html>